<!-- profile.html -->
{% extends "base.html" %}

{% block title %}Profile - Healthy Diet Tracker{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <h2>Profile</h2>
        {% if message %}
        <div class="alert alert-success">{{ message }}</div>
        {% endif %}
    </div>

    <div class="profile-card">
        <h3>Basic Information</h3>
        <form method="POST" class="profile-form">
            <div class="form-group">
                <label for="username">Username:</label>
                <input type="text" id="username" value="{{ user.username }}" disabled>
                <small>Username cannot be changed</small>
            </div>
            
            <div class="form-group">
                <label for="nickname">Nickname:</label>
                <input type="text" id="nickname" name="nickname" value="{{ user.nickname or '' }}">
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="height">Height (cm):</label>
                    <input type="number" id="height" name="height" value="{{ user.height or '' }}" min="100" max="250">
                </div>
                
                <div class="form-group">
                    <label for="weight">Weight (kg):</label>
                    <input type="number" id="weight" name="weight" value="{{ user.weight or '' }}" min="30" max="200">
                </div>
            </div>
            
            <div class="form-group">
                <label for="target_weight">Target Weight (kg):</label>
                <input type="number" id="target_weight" name="target_weight" value="{{ user.target_weight or '' }}" min="30" max="200">
            </div>
            
            <div class="form-group">
                <label for="goal">Goal:</label>
                <select id="goal" name="goal">
                    <option value="weight-loss" {% if user.goal == 'weight-loss' %}selected{% endif %}>Weight Loss</option>
                    <option value="muscle-gain" {% if user.goal == 'muscle-gain' %}selected{% endif %}>Muscle Gain</option>
                    <option value="maintenance" {% if not user.goal or user.goal == 'maintenance' %}selected{% endif %}>Weight Maintenance</option>
                </select>
            </div>
            
            <button type="submit" class="btn btn-primary">Update Profile</button>
        </form>
    </div>

    <div class="health-stats">
        <h3>Health Data</h3>
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-label">BMI Index</div>
                <div class="stat-value">
                    {% if bmi %}
                        {{ bmi }} ({{ bmi_status }})
                    {% else %}
                        Not Set
                    {% endif %}
                </div>
            </div>
            
            <div class="stat-item">
                <div class="stat-label">Recommended Daily Calories</div>
                <div class="stat-value">
                    {% if user.height and user.weight %}
                        {{ diet_generator.calculate_daily_calories(user) }} Calories
                    {% else %}
                        Please set height and weight first
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}